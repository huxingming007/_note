## 五层重要协议

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g82cg6f57yj30hl09kaao.jpg)

我们采用中和OSI和TCP/IP协议的五层协议体系结构。

### 应用层

------

协议比方说DNS域名解析

### 运输层

------

TCP：面向连接的，可靠的数据传输服务。

UDP：无连接，不保证数据传输的可靠性。

### 网络层

------

把运输层产生的报文段或用户数据报封装成分组和包进行传送。

### 数据链路层

------

两台主机之间的数据传输，总是在一段一段的链路上传送的，这就需要使用专门的链路层协议。

### 物理层

------

实现相邻计算机节点之间比特流的透明传送，尽可能屏蔽掉具体传输介质和物理设备的差异。

## TCP三次握手和四次挥手

### 图解三次握手

### ![](https://tva1.sinaimg.cn/large/006y8mN6ly1g82cst4hdpj30o00c7mxr.jpg)

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g82csy5kzyj30f20bv74c.jpg)

### 为什么要三次握手

双方确认自己与对方的发送与接收是正常的。

### 接收端为什么要传回SYN

接收端传回发送端所发送的SYN是为了告诉发送端，我接收到的信息确实就是你所发送的信号。

### 接收方传了SYN，为啥还要传ACK

双方通信无误必须是两者互相发送信息都无误。传了 SYN，证明发送方到接收方的通道没有问题，但是接收方到发送方的通道还需要 ACK 信号来进行验证。

### 图解四次挥手

![TCP四次挥手](https://my-blog-to-use.oss-cn-beijing.aliyuncs.com/2019/7/TCP%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B.png)

### 为什么要四次挥手

看图说话。

### TCP、UDP协议的区别

传送数据之前需不需要建立连接，可靠不可靠。UDP：QQ、直播等等。TCP：文件传输、接收和发送邮件等等场景。

### TCP协议如何保证可靠传输

1、流量控制，当接收方来不及处理发送方的消息，能提示发送方降低发送的速率；

2、拥塞控制，当网络繁忙时，减少数据的发送；

3、每发送完一个分组就停止发送，等待对方确认；

4、超时重传，当发出一个段后，启动一个定时器，等待目的端确认收到这个报文段，如果不能及时收到一个报文段，将重发这个报文段。

### 在浏览器输入URL地址->显示主页的过程

[参考文章](https://segmentfault.com/a/1190000006879700)

1、DNS解析

2、TCP连接

3、发送HTTP请求

4、服务器处理请求返回HTTP报文

5、浏览器解析渲染页面

6、连接结束

### HTTP长连接、短连接

在HTTP1.0中默认使用短连接，客户端和服务端每进行一次HTTP操作，就建立一次连接，任务结束就中断连接。

从1.1起，默认使用长连接，用以保持连接特性。响应头加入这行代码：

~~~java
Connection:keep-alive
~~~

### cookie和session

HTTP是无状态的。session机制来保存用户状态，比方说购物车场景。session保存在内存或者数据库中，大部分情况下，我们在cookie中附加一个session ID来跟踪这个session。

cookie：一般用于保存用户的登录信息，登录成功，存放一个token放到cookie里面。存放在客户端。

session：记录用户的状态，购物车场景。存放在服务端。

### HTTP1.0和1.1的主要区别

1、短链接还是长连接；

2、新增错误状态码；

3、缓存处理策略更多；

4、带宽优化。

### URI和URL的区别是什么

- URI(Uniform Resource Identifier) 是统一资源标志符，可以唯一标识一个资源。
- URL(Uniform Resource Location) 是统一资源定位符，可以提供该资源的路径。它是一种具体的 URI，即 URL 可以用来标识一个资源，而且还指明了如何 locate 这个资源。

URI的作用像身份证号一样，URL的作用更像家庭住址一样。URL是一种具体的URI，它不仅唯一标识资源，而且还提供了定位该资源的信息。

### HTTP和HTTPS的区别

1、端口，80和443

2、安全性和资源消耗：明文和加密（对称加密，秘钥是通过非对称加密获得），HTTPS资源消耗的更加多。

